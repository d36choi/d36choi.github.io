---
layout: post
title: java-to-kotlin-1
date: 2024-02-25 12:58 +0900
categories: ["자바에서 코틀린으로"]
tags: [java]
---

# 자바에서 코틀린으로

## 서론

- 이 책은 코틀린 프로그래밍에 대해 설명하는게 아니다
- 자바 기술자에게 코틀린을 소개해주고 가르쳐주는 것을 상정하였다
- **기존 자바와 코딩지식으로 코틀린을 채택하고픈 자바기술팀을 위해 고안된 책이다**
- 코틀린에 대해 깊게 고민안하면, 단순히 코틀린으로 자바코드를 개발하게 된다

#### 소프트웨어 코드 품질 판단 방법?

> 바로 복잡도다.

- 복잡도나 단순성은 개인에 따라 판단이 달라지긴 함
- 일단 함수형 프로그래밍은 객체지향 메시지전달과 함께할 때 엄청난 파워가 있다고 저자는 믿음 (즉 복잡도를 낮출 수 있다)


## ch1

### java 1.0
- 일급시민 함수가 없었다. 타입이 다른 함수는 인터페이스로 만들어야했다. 원시<->참조 타입의 오토박싱도 없었다
- 컬렉션도 없었고 제네릭스도 없었다. 

### java 8
- stream API, 람다식 익명함수, 메서드 참조 추가되며 **함수형 스타일이 잘 어우러지게 됨**
- 그러나 checked Exception 등, 함수형프로그래밍과 잘 엮이지 않는 부분이 여전히 존재

### 코틀린의 선호 방향

- 가변보단 불변데이터를 변환하고자 함 (불변 컬렉션의 변환이 훨씬 간결)
- 암시적보단 명시적인 타입 변환 (java: int -> long 암시적변환. kotlin: Int.toLong(\))
- 예측불가능하게 동작하는, 특별한 경우를 바라지 않음
- 마이그레이션을 쉽게하기위해 자기의 규칙을 깨버린다
  - 이런 기능 중 일부는 타입검사기의 안정성을 깨버리기 때문에 자바와 함께쓸때만 씀
  - 대표적으로 lateinit. lateinit var 같이 선언하면, 호출 전 초기화를 할 책임이 나한테 있게 됨

### 코틀린의 리팩터링 방향

> 언어에서 언어 사이의 리팩터링은 한 언어 안에서의 리팩터링보다 어렵다
> 그런데, 자바->코틀린은 한언어 안에서의 리팩터링 만큼 쉽다. 이유는 젯브레인의 투자와 JVM 내에서의 연결방식등.


#### 테스트 커버리지가 좋다고 가정한다
- 마틴파울러왈, 리팩터링은 탄탄한 테스트가 선행되어야 한다
- 테스트를 추가하기 위해서는 리팩터링을 해야 하는데, 리팩터링을 하려면 테스트를 추가해야 한다
- 닭이 먼저냐 달걀이 먼저냐 같은 상황에 처한다

#### git bisect를 활용한다
- 테스트가 오류를 못잡아 내는 경우, 오류 유발 코드를 찾고 싶을 것
- git bisect 명령은 이런 검색을 자동화해 준다. 
- 오류를 보여 주는 새 테스트를 작성하면 git bisect가 커밋 이력을 이진 검색binary search해서 테스트가 실패하는 첫 번째 커밋을 찾아준다

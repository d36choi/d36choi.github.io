---
layout: post
title: item 71 필요 없는 검사 예외(checked error) 사용은 피하라
date: 2024-05-18 21:54 +0900
categories: ["이펙티브 자바"]
tags: [java]
---

## 검사 예외 사용의 단점?

- try-catch, throws 를 강제한다
- 이 상황에서 많은 개발자들은 처리가 귀찮다는 이유로 예외를 catch로 무시해버리기도 함
- 검사 예외가 발생하는 메서드는 스트림 안에서 직접 사용이 불가함


## 검사 예외 회피 방법

- Optional
  - 적절한 결과타입을 담은 옵셔널을 반환
  - Optional.empty() 를 반환하면 됨
  - 그러나 예외 발생이유를 담아서 줄 수 없다는 단저
- 검사 예외 던지는 메서드를 2개로 쪼갠뒤 비검사 예외로 바꾼다

```java
// 검사 예외를 던지는 메서드 - 리팩터링 전


try {
  obj.action(args);
} catch (TheCheckedException e) {
  // 예외 복구
}

// 상태 검사 메서드와 비검사 예외를 던지는 메서드 - 리팩터링 후
if(obj.actionPermitted(args)) {
  obj.action(args);
} else {
  // 예외 복구
}
```


- 훨씬 유연하지만 모든 상황에 적용가능한 건 아님
- 멀티스레드 환경에서 `actionPermitted() `는 적합하지 않음. 객체 검사와 실제 메서드 사이에서 객체 상태가 변할 수 있기 때문

## 정리
- 검사예외는 필요한 경우 프로그램 안정성을 높인다
- 하지만 개발자가 무시하거나 필요치 않은 곳에 쓰이면 복잡도만 늘어난다
- 예외 상황에서 복구가 불가능하면 비검사 예외를 던지자
